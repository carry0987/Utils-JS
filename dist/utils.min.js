!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Utils=t()}(this,(function(){"use strict";class e{constructor(e){Object.assign(this,e)}static version="2.2.2";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(t){e.stylesheetId=t}static setReplaceRule(t,r){e.replaceRule.from=t,e.replaceRule.to=r}static getElem(e,t,r){if(e instanceof Element)return e;let n=document;return null===t&&r instanceof Element||r instanceof Element?n=r:t instanceof Element&&(n=t,t=void 0),"all"===t?n.querySelectorAll(e):n.querySelector(e)}static createElem(e,t={},r=""){let n=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("innerText"===e?n.textContent=t[e]:n.setAttribute(e,t[e]));return r&&n.append(document.createTextNode(r)),n}static insertAfter(t,r){if("string"==typeof r){let t=e.createElem("div");t.innerHTML=r,(r=t.firstChild)||e.throwError("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(r,t.nextSibling)}static insertBefore(t,r){if("string"==typeof r){let t=e.createElem("div");t.innerHTML=r,(r=t.firstChild)||e.throwError("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(r,t)}static addClass(e,t){return e.classList.add(t),e}static removeClass(e,t){return e.classList.remove(t),e}static toggleClass(e,t){return e.classList.toggle(t),e}static hasClass(e,t){return e.classList.contains(t)}static isObject(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}static deepMerge(t,...r){if(!r.length)return t;const n=r.shift();if(n)for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const s=n[r],o=r;e.isObject(s)?(t[o]&&"object"==typeof t[o]||(t[o]={}),e.deepMerge(t[o],s)):t[o]=s}return e.deepMerge(t,...r)}static injectStylesheet(t,r=null){r=e.isEmpty(r)?"":r;let n=e.createElem("style");n.id=e.stylesheetId+r,n.textContent="",document.head.append(n);let s=n.sheet;for(let n in t)t.hasOwnProperty(n)&&e.compatInsertRule(s,n,e.buildRules(t[n]),r)}static buildRules(e){let t="";for(let[r,n]of Object.entries(e))r=r.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${r}:${n};`;return t}static compatInsertRule(t,r,n,s=null){s=e.isEmpty(s)?"":s;let o=r.replace(e.replaceRule.from,e.replaceRule.to+s);t.insertRule(o+"{"+n+"}",0)}static removeStylesheet(t=null){t=e.isEmpty(t)?"":t;let r=e.getElem("#"+e.stylesheetId+t);r&&r.parentNode.removeChild(r)}static isEmpty(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}static createEvent(e,t,r){return new CustomEvent(e,{detail:t,...r})}static dispatchEvent(t,r=document,n,s){if("string"==typeof t){const o=e.createEvent(t,n,s);return r.dispatchEvent(o)}return t instanceof Event?r.dispatchEvent(t):(e.throwError("Invalid event type"),!1)}static addEventListener(...e){const[t,r,n,s]=e;t.addEventListener(r,n,s)}static removeEventListener(...e){const[t,r,n,s]=e;t.removeEventListener(r,n,s)}static generateRandom(e=8){return Math.random().toString(36).substring(2,2+e)}static setLocalValue(e,t,r=!0){r&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}static getLocalValue(t,r=!0){let n=window.localStorage.getItem(t);if(r)try{n=JSON.parse(n)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return n}static removeLocalValue(e){window.localStorage.removeItem(e)}static setSessionValue(e,t,r=!0){r&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)}static getSessionValue(t,r=!0){let n=window.sessionStorage.getItem(t);if(r)try{n=JSON.parse(n)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return n}static removeSessionValue(e){window.sessionStorage.removeItem(e)}static setCookie(t,r,n){let s=encodeURIComponent(t)+"="+encodeURIComponent(r)+";";const o={expires:new Date(Date.now()+864e5),path:"/",secure:!1,sameSite:"Lax"};if((n=n?e.deepMerge({},o,n):o).expires){let t=null;if(n.expires instanceof Date)t=n.expires.toUTCString();else try{t=new Date(n.expires).toUTCString()}catch(t){e.reportError("Invalid date string for cookie expiration:",t)}s+="expires="+t+";"}n.path&&(s+="path="+n.path+";"),n.domain&&(s+="domain="+n.domain+";"),n.secure&&(s+="secure;"),n.sameSite&&(s+="SameSite="+n.sameSite+";"),document.cookie=s}static getCookie(e){const t=encodeURIComponent(e)+"=",r=document.cookie.split(";");for(let e=0;e<r.length;e++){let n=r[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null}static deleteCookie(e){this.setCookie(e,"",{expires:new Date(0)})}static getUrlParameter(e,t=window.location.search){let r=new URLSearchParams(t).get(e);return null===r?null:decodeURIComponent(r)}static async doFetch(e){const{url:t,method:r="GET",headers:n={},body:s=null,beforeSend:o=null,success:a=null,error:i=null}=e;let l={method:r,mode:"cors",headers:n instanceof Headers?n:new Headers(n)};if(null!==s&&["PUT","POST","DELETE"].includes(r.toUpperCase())){let e=s;s instanceof FormData||(e=JSON.stringify(s),l.headers instanceof Headers||(l.headers=new Headers(l.headers)),l.headers.append("Content-Type","application/json")),l.body=e}let c=new Request(t,l);try{const e=await new Promise((e=>{o?.(),e(c)})),t=await fetch(e),r=await t.json();return a?.(r),r}catch(e){throw i?.(e),e}}static appendFormData(t,r=new FormData){const{data:n,parentKey:s=""}=t;if(null!==n&&"object"==typeof n)if(n instanceof Blob||n instanceof File){const e=s||"file";r.append(e,n)}else Object.keys(n).forEach((t=>{const o=n[t],a=s?`${s}[${t}]`:t;null!==o&&"object"==typeof o?e.appendFormData({data:o,parentKey:a},r):null!==o&&r.append(a,String(o))}));else null!==n&&r.append(s,n);return r}static encodeFormData(t,r=""){if(t instanceof FormData)return t;const n={data:t,parentKey:r};return e.appendFormData(n)}static async sendFormData(t){const{url:r,data:n,method:s="POST",success:o,errorCallback:a}=t,i={url:r,method:s,body:e.encodeFormData(n),success:e=>{o&&o(e)},error:e=>{a&&a(e)}};return e.doFetch(i).then((()=>!0)).catch((()=>!1))}static reportError(...e){console.error(...e)}static throwError(e){throw new Error(e)}}return Object.defineProperty(e,"version",{writable:!1,configurable:!0}),e}));
