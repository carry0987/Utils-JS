!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Utils=t()}(this,(function(){"use strict";class e{constructor(e){Object.assign(this,e)}static version="2.1.10";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(t){e.stylesheetId=t}static setReplaceRule(t,r){e.replaceRule.from=t,e.replaceRule.to=r}static getElem(e,t,r){return"object"==typeof e?e:void 0===t&&void 0===r?isNaN(Number(e))?document.querySelector(e):document.getElementById(e):null===t?void 0===r?document.querySelector(e):r.querySelector(e):"all"===t?void 0===r?document.querySelectorAll(e):r.querySelectorAll(e):"object"==typeof t?t.querySelector(e):null}static createElem(e,t={},r=""){let n=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("innerText"===e?n.textContent=t[e]:n.setAttribute(e,t[e]));return r&&n.append(document.createTextNode(r)),n}static insertAfter(t,r){if("string"==typeof r){let t=e.createElem("div");t.innerHTML=r,r=t.firstChild}t.nextSibling?t.parentNode.insertBefore(r,t.nextSibling):t.parentNode.appendChild(r)}static insertBefore(t,r){if("string"==typeof r){let t=e.createElem("div");t.innerHTML=r,r=t.firstChild}t.parentNode.insertBefore(r,t)}static addClass(e,t){return e.classList.add(t),e}static removeClass(e,t){return e.classList.remove(t),e}static toggleClass(e,t){return e.classList.toggle(t),e}static hasClass(e,t){return e.classList.contains(t)}static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static deepMerge(t,...r){if(!r.length)return t;const n=r.shift();if(n)for(const r in n)e.isObject(n[r])?(t[r]||(t[r]={}),e.deepMerge(t[r],n[r])):t[r]=n[r];return e.deepMerge(t,...r)}static injectStylesheet(t,r=null){r=e.isEmpty(r)?"":r;let n=e.createElem("style");n.id=e.stylesheetId+r,n.textContent="",document.head.append(n);let o=n.sheet;for(let n in t)t.hasOwnProperty(n)&&e.compatInsertRule(o,n,e.buildRules(t[n]),r)}static buildRules(e){let t="";for(let[r,n]of Object.entries(e))r=r.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${r}:${n};`;return t}static compatInsertRule(t,r,n,o=null){o=e.isEmpty(o)?"":o;let s=r.replace(e.replaceRule.from,e.replaceRule.to+o);t.insertRule(s+"{"+n+"}",0)}static removeStylesheet(t=null){t=e.isEmpty(t)?"":t;let r=e.getElem("#"+e.stylesheetId+t);r&&r.parentNode.removeChild(r)}static isEmpty(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}static createEvent(e,t=null){return new CustomEvent(e,{detail:t})}static dispatchEvent(t,r=null){document.dispatchEvent(e.createEvent(t,r))}static generateRandom(e=8){return Math.random().toString(36).substring(2,2+e)}static setLocalValue(e,t,r=!0){r&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}static getLocalValue(t,r=!0){let n=window.localStorage.getItem(t);if(r)try{n=JSON.parse(n)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return n}static removeLocalValue(e){window.localStorage.removeItem(e)}static setSessionValue(e,t,r=!0){r&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)}static getSessionValue(t,r=!0){let n=window.sessionStorage.getItem(t);if(r)try{n=JSON.parse(n)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return n}static removeSessionValue(e){window.sessionStorage.removeItem(e)}static setCookie(t,r,n){let o=encodeURIComponent(t)+"="+encodeURIComponent(r)+";";const s={expires:new Date(Date.now()+864e5),path:"/",secure:!1,sameSite:"Lax"};if((n=n?e.deepMerge({},s,n):s).expires){let t=null;if(n.expires instanceof Date)t=n.expires.toUTCString();else try{t=new Date(n.expires).toUTCString()}catch(t){e.reportError("Invalid date string for cookie expiration:",t)}o+="expires="+t+";"}n.path&&(o+="path="+n.path+";"),n.domain&&(o+="domain="+n.domain+";"),n.secure&&(o+="secure;"),n.sameSite&&(o+="SameSite="+n.sameSite+";"),document.cookie=o}static getCookie(e){const t=encodeURIComponent(e)+"=",r=document.cookie.split(";");for(let e=0;e<r.length;e++){let n=r[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null}static deleteCookie(e){this.setCookie(e,"",{expires:new Date(0)})}static getUrlParameter(e,t=window.location.search){let r=new URLSearchParams(t).get(e);return null===r?null:decodeURIComponent(r)}static async doFetch(e){const{url:t,method:r="GET",headers:n={},body:o=null,beforeSend:s=null,success:a=null,error:i=null}=e;let l={method:r,mode:"cors",headers:n instanceof Headers?n:new Headers(n)};if(null!==o&&["PUT","POST","DELETE"].includes(r.toUpperCase())){let e=o;o instanceof FormData||(e=JSON.stringify(o),l.headers instanceof Headers||(l.headers=new Headers(l.headers)),l.headers.append("Content-Type","application/json")),l.body=e}let c=new Request(t,l);try{const e=await new Promise((e=>{s?.(),e(c)})),t=await fetch(e),r=await t.json();return a?.(r),r}catch(e){throw i?.(e),e}}static appendFormData(t,r=new FormData){const{data:n,parentKey:o=""}=t;if(null!==n&&"object"==typeof n)if(n instanceof Blob||n instanceof File){const e=o||"file";r.append(e,n)}else Object.keys(n).forEach((t=>{const s=n[t],a=o?`${o}[${t}]`:t;null!==s&&"object"==typeof s?e.appendFormData({data:s,parentKey:a},r):null!==s&&r.append(a,String(s))}));else null!==n&&r.append(o,n);return r}static encodeFormData(t,r=""){if(t instanceof FormData)return t;const n={data:t,parentKey:r};return e.appendFormData(n)}static async sendFormData(t){const{url:r,data:n,method:o="POST",success:s,errorCallback:a}=t,i={url:r,method:o,body:e.encodeFormData(n),success:e=>{s&&s(e)},error:e=>{a&&a(e)}};return e.doFetch(i).then((()=>!0)).catch((()=>!1))}static reportError(...e){console.error(...e)}static throwError(e){throw new Error(e)}}return Object.defineProperty(e,"version",{writable:!1,configurable:!0}),e}));
